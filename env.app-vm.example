# Open WebUI Application VM Environment Configuration
# Copy to .env.app-vm and configure before deployment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://openwebui:changeme@postgres:5432/openwebui
DATABASE_USER=openwebui
DATABASE_PASSWORD=changeme
DATABASE_NAME=openwebui

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
WEBUI_SECRET_KEY=your-secret-key-change-in-production

# Docker image tag (default: main)
WEBUI_DOCKER_TAG=main

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Your domain for SSL certificates
FQDN=openwebui.example.com

# =============================================================================
# WEB SEARCH CONFIGURATION (External VM)
# Set these to point to your Web Search VM IP address
# =============================================================================
WEB_SEARCH_VM_IP=10.0.0.2

# Enable web search
ENABLE_WEB_SEARCH=true

# Search Engine: SearXNG
WEB_SEARCH_ENGINE=searxng
SEARXNG_QUERY_URL=http://${WEB_SEARCH_VM_IP}:8080/search

# Web Loader: Playwright for JavaScript rendering
WEB_LOADER_ENGINE=playwright
PLAYWRIGHT_WS_URL=ws://${WEB_SEARCH_VM_IP}:3000
PLAYWRIGHT_TIMEOUT=30000

# Optional: Reranker for improved search result relevance
RAG_RERANKING_ENGINE=external
RAG_EXTERNAL_RERANKER_URL=http://${WEB_SEARCH_VM_IP}:8086/rerank

# Search result settings
WEB_SEARCH_RESULT_COUNT=5
WEB_SEARCH_CONCURRENT_REQUESTS=5
WEB_LOADER_CONCURRENT_REQUESTS=10

# =============================================================================
# LLM PROVIDERS (configure at least one)
# =============================================================================

# Ollama (if running locally or on another server)
ENABLE_OLLAMA_API=true
OLLAMA_BASE_URL=http://host.docker.internal:11434

# OpenAI-compatible API
ENABLE_OPENAI_API=true
OPENAI_API_KEY=your-openai-api-key
OPENAI_API_BASE_URL=https://api.openai.com/v1

# =============================================================================
# OPTIONAL: RAG EMBEDDING CONFIGURATION
# =============================================================================
# Default uses local sentence-transformers model
# RAG_EMBEDDING_ENGINE=openai
# RAG_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# OPTIONAL: AUTHENTICATION
# =============================================================================
# ENABLE_SIGNUP=true
# WEBUI_AUTH=true

# OAuth (Microsoft Entra ID / Azure AD example)
# OAUTH_CLIENT_ID=your-client-id
# OAUTH_CLIENT_SECRET=your-client-secret
# OAUTH_PROVIDER_NAME=Microsoft
# OPENID_PROVIDER_URL=https://login.microsoftonline.com/{tenant-id}/v2.0/.well-known/openid-configuration

# =============================================================================
# OPTIONAL: REDIS (for multi-instance deployments)
# =============================================================================
# REDIS_URL=redis://redis:6379
# WEBSOCKET_MANAGER=redis
